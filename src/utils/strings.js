export function normalizeName(raw = '') {
  let s = String(raw || '')
    .normalize('NFKC')
    .toLowerCase()
    .trim();

  // единые пробелы + перевод NBSP → обычного пробела
  s = s.replace(/\u00a0/g, ' ').replace(/\s+/g, ' ');
  // унифицируем типографские тире/минусы и обрамляющие кавычки
  s = s
    .replace(/[‐‑‒–—―]/g, '-')
    .replace(/\s*-\s*/g, '-')
    .replace(/[«»„“”"'`’]/g, '');
  // округ скобок и служебных символов
  s = s.replace(/[(){}\[\]]/g, ' ').replace(/[\\/_+*]/g, ' ');
  // дробные объёмы типа "0,5" → "0.5"
  s = s.replace(/(\d),(\d)/g, '$1.$2');
  // прибираем типичные «хвосты» упаковок в конце: "x12", "×12", "12 шт", "(12 шт)"
  s = s.replace(/[\s,]*\(?\s*(x|×)?\s*\d+\s*(шт|штук|pcs)?\s*\)?\s*$/i, '');
  // повторное схлопывание пробелов после чистки
  s = s.replace(/\s+/g, ' ').trim();
  // добивка: убрать финальные знаки препинания/пробелы
  s = s.replace(/[,\.;:]\s*$/,'').trim();
  return s;
}
